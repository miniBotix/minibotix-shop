<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Shopping Cart</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
        .product-container { width: 300px; margin: 20px auto; padding: 15px; border: 1px solid #ccc; border-radius: 10px; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.1); }
        img { width: 100%; border-radius: 10px; }
        .product-name { font-size: 20px; font-weight: bold; margin-top: 10px; }
        .price { color: green; font-size: 18px; margin: 5px 0; }
        input { width: 50px; text-align: center; font-size: 16px; margin: 5px; }
        button { background: #28a745; color: white; padding: 10px; border: none; cursor: pointer; border-radius: 5px; font-size: 16px; }
        button:hover { background: #218838; }

        /* Cart Icon */
        .cart-icon { position: fixed; top: 20px; right: 20px; background: #ff9800; color: white; padding: 10px; border-radius: 50%; cursor: pointer; font-size: 18px; width: 50px; height: 50px; display: flex; align-items: center; justify-content: center; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2); }
        .cart-count { position: absolute; top: -5px; right: -5px; background: red; color: white; font-size: 12px; width: 20px; height: 20px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }

        /* Cart Pop-up */
        .cart-popup { display: none; position: fixed; top: 50px; right: 20px; width: 300px; background: white; border: 1px solid #ccc; border-radius: 10px; padding: 15px; box-shadow: 2px 2px 10px rgba(0, 0, 0, 0.2); }
        .cart-popup h3 { margin: 0 0 10px; }
        .cart-popup button { width: 100%; margin-top: 10px; }
        .cart-item { display: flex; justify-content: space-between; padding: 5px 0; }
        .close-btn { position: absolute; top: 5px; right: 10px; cursor: pointer; color: red; font-size: 18px; }

    </style>
</head>
<body>

    <div class="product-container">
        <img src="https://components101.com/sites/default/files/components/ESP8266-NodeMCU.jpg" alt="NodeMCU ESP8266">
        <div class="product-name">NodeMCU ESP8266</div>
        <div class="price">â‚¹470</div>
        <label for="quantity">Quantity:</label>
        <input type="number" id="quantity" min="1" max="10" value="1">
        <br><br>
        <button onclick="addToCart()">Add to Cart</button>
    </div>

    <!-- Cart Icon -->
    <div class="cart-icon" onclick="toggleCart()">
        ðŸ›’ <span class="cart-count" id="cart-count">0</span>
    </div>

    <!-- Cart Pop-up -->
    <div class="cart-popup" id="cart-popup">
        <span class="close-btn" onclick="toggleCart()">âœ–</span>
        <h3>Shopping Cart</h3>
        <div id="cart-items"></div>
        <button onclick="checkout()">Place Order</button>
    </div>

    <script>
        let cart = [];

        function addToCart() {
            let quantity = document.getElementById("quantity").value;
            let product = "NodeMCU ESP8266";
            let price = 470;

            let item = cart.find(item => item.product === product);
            if (item) {
                item.quantity = parseInt(item.quantity) + parseInt(quantity);
            } else {
                cart.push({ product, price, quantity });
            }

            document.getElementById("cart-count").innerText = cart.length;
            alert("Added to Cart!");
        }

        function toggleCart() {
            let cartPopup = document.getElementById("cart-popup");
            cartPopup.style.display = cartPopup.style.display === "block" ? "none" : "block";
            displayCart();
        }

        function displayCart() {
            let cartItems = document.getElementById("cart-items");
            cartItems.innerHTML = "";
            cart.forEach(item => {
                cartItems.innerHTML += `<div class="cart-item">
                    <span>${item.product} x ${item.quantity}</span>
                    <span>â‚¹${item.price * item.quantity}</span>
                </div>`;
            });
        }

        function checkout() {
            let name = prompt("Enter your name:");
            let email = prompt("Enter your email:");
            let phone = prompt("Enter your phone number:");
            let address = prompt("Enter your delivery address:");

            if (!name || !email || !phone || !address) {
                alert("All fields are required!");
                return;
            }

            let orderDetails = { name, email, phone, address, cart };

            fetch("https://script.google.com/macros/s/AKfycbxdZcGzI4Ps1KjbUSP_wSFHWq85m-TubycEDrgF1ydJjeXtPf1RWVgf3aNKwnM0VjFj/exec", {
                method: "POST",
                body: JSON.stringify(orderDetails),
                headers: { "Content-Type": "application/json" }
            })
            .then(response => response.text())
            .then(data => {
                if (data === "Success") {
                    alert("Order placed successfully! Check your email.");
                    cart = [];
                    document.getElementById("cart-count").innerText = "0";
                    toggleCart();
                } else {
                    alert("Error placing order. Try again.");
                }
            })
            .catch(error => console.error("Error:", error));
        }
    </script>

</body>
</html>
